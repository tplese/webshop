
## Contents

[Description](#description)

[Models](#models)

[Java environment](#java-environment)

[Steps to start and use application](#steps-to-start-and-use-application)



## Description

REST webshop backend service with the following technology stack:
* Java 8+
* Maven
* Git
* Spring Boot + Spring Web MVC
* Spring Data JPA
* Relational database (Postgres in Docker container)
* JUnit , AssertJ , Wiremock for unit tests

A simple REST service that can be used as a webshop backend.
Source is packaged as a Java JAR file.

Contains following parts:
* Product model
* REST CRUD API for Product
    * request validation
    * tests for created endpoints
* Customer and Order model
* REST API for Order
    * endpoints
        * create-order
        * update-order (only available products can be added to the order)
        * read-order
        * delete-order
    * tests for created endpoints
* Endpoint for finalizing the order
    * Calculates total price in HRK (default currency)
    * Calls HNB API to retrieve current exchange rates (HRK/EUR)
        * total_price_eur set based on retrieved exchange rate
        * wiremock used for mocking in tests
    * Order status set after finalization
    * tests for created endpoint



## Models

&nbsp; __________ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ______ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ___________ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; _________ \
| Customer  | 1&nbsp;&nbsp; ----- &nbsp;&nbsp;* | Order | 1&nbsp;&nbsp; ----- &nbsp;&nbsp;* | OrderItem | 1&nbsp;&nbsp; ----- &nbsp;&nbsp;1 | Product |\
&nbsp; &oline;&oline;&oline;&oline;&oline;&oline;&oline;&oline;&oline;&oline; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &oline;&oline;&oline;&oline;&oline;&oline; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &oline;&oline;&oline;&oline;&oline;&oline;&oline;&oline;&oline;&oline;&oline; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &oline;&oline;&oline;&oline;&oline;&oline;&oline;&oline;&oline;

Product
* id (autogenerated)
* code (unique) (exactly 10 characters)
* name
* price_hrk (>= 0)
* description
* is_available (boolean)

Customer
* id (autogenerated)
* first_name
* last_name
* email

Order
Note: order is a reserved keyword in SQL, so alternative table name used.
* id (autogenerated)
* customer_id
* status (enum: DRAFT, SUBMITTED)
* total_price_hrk
* total_price_eur

OrderItem
* id (autogenerated)
* order_id
* product_id
* quantity



## Java environment

* Java version 11.0.11
* Maven version 3.8.4
* Spring Boot
* JAR file: webshop-0.0.1-SNAPSHOT.jar



## Steps to start and use application

1. Create PostgreSQL in Docker:
```
docker run --name webshop-db -e POSTGRES_PASSWORD=testpass -p 5432:5432 -d postgres
```
2. In Docker, start container named "webshop-db"
3. Connect to PostgreSQL database (via DBeaver SQL client application):
    * Database type: PostgreSQL
    * Host: localhost
    * Port: 5432
    * User: postgres
    * Password: testpass
4. Go to directory where you saved the Webshop application
5. To install the Webshop application, in command line run:
```
mvn clean install
```
6. To create JAR file of the Webshop application, in command line run:
```
mvn clean package
```
7. To start the Webshop application, in command line run:
* Windows:
```
java -jar .\target\webshop-0.0.1-SNAPSHOT.jar
```
* Linux and Mac
```
java -jar ./target/webshop-0.0.1-SNAPSHOT.jar
```
7. Use Postman application to send GET/POST/PUT/DELETE HTTP requests and get responses from Webshop application
